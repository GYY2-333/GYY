# Design and Verification of a Multifunctional EEG Acquisition and Processing System

## Abstract

EEG (electroencephalogram) records potential changes generated by the electrical activity of brain neurons through electrodes placed on the scalp. It possesses advantages such as millisecond-level high temporal resolution, non-invasiveness, low cost, and portability. This study designs an EEG brain signal acquisition and analysis device, with the low-power microcontroller ESP32-S3 as the main control core and the high-precision 24-bit analog-to-digital conversion chip ADS1299 for brain signal acquisition. The lower computer (based on ESP32-S3) stably transmits raw EEG data to the PC upper computer through protocols such as SPI/I2C. The upper computer software performs analytical processing of the received signals, including digital filtering and feature extraction, and displays EEG waveforms in real-time through a visualization interface, achieving full-chain functionality from signal acquisition, transmission to analysis and plotting. This system combines the high performance of ESP32-S3 with the biological signal optimization characteristics of ADS1299, balancing low power consumption, high precision, and real-time performance, making it suitable for scenarios such as neuroscience research and brain state monitoring.

## 1. Introduction

As a direct electrophysiological indicator of brain function, EEG signals record microvolt-level potential changes in neuronal population electrical activity through scalp electrodes, capable of real-time reflection of the brain's arousal state and cognitive load. Analysis based on EEG event-related potentials can reveal the neural mechanisms of cognitive processes such as attention and decision-making. For example, BCI (Brain-Computer Interface) systems often need to decode steady-state frequency characteristics of SSVEP (Steady-State Visual Evoked Potential), such as when subjects gaze at specific frequency flickering stimuli, the occipital region produces brain electrical responses synchronized with the stimulus frequency. Alternatively, cognitive intentions for target stimuli can be identified through paradigms such as P300, thereby achieving "thought control."

However, reliable acquisition of EEG signals faces multiple challenges: first, the signals are weak (typically 1-30μV) and highly susceptible to noise interference; second, high-precision acquisition and stable real-time data transmission under low-power conditions are required to ensure the integrity of weak signals. This imposes stringent requirements on the stability and correctness of the acquisition system.

Addressing the above issues, this paper not only validates the system's ability to analyze cognition-related electrical signals through classical experimental paradigms such as SSVEP and P300, but further conducts multi-scenario comparative experiments using traditional gold-plated dry electrodes, silver chloride dry electrodes, conductive paste wet electrodes, and novel gel electrode materials. By analyzing the impedance characteristics of EEG signals under different electrode materials and the consistency of cognitive task responses, the reliability of the system in diverse electrode adaptation scenarios is comprehensively evaluated.

## 2. System Design and Experimental Materials

### 2.1 System Design

The system design uses ESP32-S3 as the main control chip, paired with the ADS1299 high-precision 24-bit ADC, constructing a high-performance, multi-mode brain signal acquisition and analysis platform. The lower computer configures ADS1299 registers through the SPI bus (sampling rate 250SPS-16kSPS, independent channel gain/reference settings), capable of real-time acquisition of 16-channel EEG signals, and transmits them to the upper computer through serial/WiFi in frame format (frame header + data + frame tail), supporting corrupted frame detection. The upper computer adopts a C++/Python hybrid architecture, integrating Qt/PyQtGraph to achieve low-latency (67FPS) multi-channel waveform display, combined with ring buffer and OpenGL-accelerated rendering to ensure real-time performance. The post-processing module's file saving formats support TXT, EDF, CSV, and BDF. To enhance the fluidity of main interface operations, we have created a thread pool. Meanwhile, a multi-dimensional analysis module is designed in the upper computer to process data from PsychoPy experiments in a targeted manner.

### 2.2 Material Preparation

#### 2.2.1 Novel Gel Electrode (PAM-PAA-PANI Hydrogel)

Based on the developed novel material PAM-PAA-PANI conductive hydrogel (directional vertical pore structure, composite carbon nanotube and polyaniline conductive network), no additional conductive paste is needed. Signal conduction is achieved through direct contact between the hydrophilic gel layer and the scalp. As an innovative representative of "flexible adaptive electrodes," it is used to compare the system's multi-scenario adaptation reliability in flexible application, low impedance, and dynamic scenarios.

#### 2.2.2 Traditional Gold-plated Dry Electrode

Commercial standard gold-plated dry electrodes are used, with surfaces coated with highly conductive gold layers, requiring no conductive paste or gel medium. They are used to verify the system's basic signal acquisition capability under conditions without wet coupling.

#### 2.2.3 Silver Chloride Dry Electrode

Standard silver chloride dry electrodes are selected, relying on the high conductivity of the metal material itself to collect signals through direct physical contact with the scalp, without requiring conductive paste assistance. Its material characteristics determine stable electrical performance, providing a comparative baseline for the system's EEG signal acquisition capability under dry contact conditions.

#### 2.2.4 Conductive Paste Wet Electrode

Low-impedance pathways are formed by filling the gaps in the scalp's stratum corneum with paste, relying on the paste's conductivity and moisture retention to ensure signal integrity. As a typical representative of "wet medium coupling electrodes," it is used to verify the system's compatibility with high-conductivity coupling conditions.

### 2.3 Experimental Design

To comprehensively verify the system's reliability under different application scenarios, this study selects two classical brain electrical experimental paradigms—the Steady-State Visual Evoked Potential (SSVEP) paradigm and the oddball paradigm used to induce P300 components—conducting comparative experiments under four different material conditions. By analyzing the system's signal acquisition performance in different material environments, its stability and applicability are comprehensively evaluated.

This study involved 4 healthy male young adults with normal vision [(24±2) years old], ensuring consistency in the performance comparison of the four types of materials: gold-plated dry electrodes, silver chloride electrodes, wet electrodes, and novel gel electrodes, while providing a stable source of bioelectrical signals for system verification. All experiments were conducted under agreed-upon environmental conditions, maintaining stable physiological states of the subjects.

#### 2.3.1 P300 Experimental Design

Considering the need to maintain experimental condition consistency, for the same experimenter testing four materials, a five-minute rest period was taken between each material test before starting the next one. In the experiment, a target stimulus ratio of less than 20% was designed, with 30 trials per material, including 5 evenly distributed target stimulus trials. The stimulus duration for each trial was 1 second. There was a 1-second black screen between each trial to give the experimenter's brain some rest time.

#### 2.3.2 SSVEP Experimental Design

A frequency modulation paradigm was adopted, inducing occipital SSVEP responses through geometric shapes at a specific 15Hz frequency. The experimental procedure was the same as P300 (5-minute intervals between each material), with 20 trials per session. Signal acquisition selected four EEG channels: O1, O2, P3, and P4, with left and right ears as reference and ground electrodes, verifying the system's ability to acquire SSVEP signals under three types of material conditions: dry electrodes, gel electrodes, and wet electrodes.

### 2.4 Data Acquisition

The upper computer application first acquires raw brain electrical signals through the data acquisition board and uses the Lab Streaming Layer (LSL) protocol to transmit signal data to the experimental processing module. During experiment execution, the system generates event marker streams based on various events, precisely recording the start and end time nodes of each experimental event. To ensure signal quality, before the experiment, the system's built-in impedance detection function was used to monitor the skin-electrode interface impedance of various electrode types in real-time. The measured average impedance values were 47.55 kΩ for gold-plated dry electrodes, 36.57 kΩ for silver chloride dry electrodes, 32.68 kΩ for novel gel electrodes, and 11.92 kΩ for conductive paste wet electrodes, ensuring the stability and reliability of subsequent signal acquisition. Finally, the acquired raw brain electrical signal data and event marker information were integrated, completing the storage and archiving of experimental data in EDF and BDF standard formats.

## 3. Results

### 3.1 P300 Testing

![Figure 3-1](images/p300_results.png)
*Figure 3-1: Time-domain plots of target stimuli (top) and non-target stimuli (bottom) for four materials*

As can be seen from Figure 3-1, all four materials produced positive waves at 300-400ms, namely the P300 component. Due to the different materials, the peak values differ, ranking from high to low as: gold-plated dry electrode, silver chloride dry electrode, gel electrode, and wet electrode. This corresponds one-to-one with the material characteristics, proving the correctness of the system's acquisition and analysis, while also validating the feasibility of the novel gel material in ERP experiments.

### 3.2 SSVEP

In the SSVEP experiment, we selected three different electrode materials as representatives to verify the system's reliability. Impedance detection was performed before the experiment to ensure that all leads were in normal connection status.

#### 3.2.1 ICA Based on 15Hz Modulation

![Figure 3-2](images/dry_electrode_ica.png)
*Figure 3-2: ICA of gold-plated interdigital dry electrode under 15Hz stimulation*

Figure 3-2 shows that the ICA component has a peak at 15Hz, but the noise background is relatively high, indicating that the dry electrode can capture SSVEP responses, but the relatively high impedance and interference such as eye blinks cause slight signal attenuation.

![Figure 3-3](images/gel_electrode_ica.png)
*Figure 3-3: ICA of gel electrode under 15Hz stimulation*

Figure 3-3 shows that the ICA component has a distinct peak at 15Hz, with the waveform displaying better periodicity than the dry electrode, such as the periodicity of ICA 2, and more concentrated spectral energy. The gel electrode adaptively conforms to the scalp through flexible materials, with impedance lower than dry electrodes, resulting in richer time-domain waveform details.

![Figure 3-4](images/wet_electrode_ica.png)
*Figure 3-4: ICA of wet electrode under 15Hz*

Figure 3-4 shows that the ICA component has a distinct peak at 15Hz, indicating that the system successfully captured brain electrical responses synchronized with the stimulus frequency. The wet electrode forms a low-impedance pathway by filling scalp gaps with conductive paste, resulting in higher signal quality, superior signal-to-noise ratio, clearer waveform periodicity, and richer details, reflecting the reliability of wet electrodes under high-conductivity coupling conditions.

#### 3.2.2 Frequency-domain Analysis of 4-channel Averaged SSVEP under 15Hz Stimulation

![Figure 3-5](images/dry_electrode_spectrum.png)
*Figure 3-5: Average SSVEP spectrum of gold-plated interdigital dry electrode with channel superposition*

![Figure 3-6](images/gel_electrode_spectrum.png)
*Figure 3-6: Average SSVEP spectrum of novel gel electrode with channel superposition*

![Figure 3-7](images/wet_electrode_spectrum.png)
*Figure 3-7: Average SSVEP spectrum of wet electrode with channel superposition*

Figures 3-5, 3-6, and 3-7 show the channel-averaged SSVEP spectra using dry electrodes, novel gel electrodes, and wet electrodes, respectively. In all figures, the peaks at 14.65 and 14.89 Hz correspond to the visual stimulus frequency (15 Hz), while second harmonic responses are observed around 30 Hz, indicating that the system can effectively capture the main frequency components of SSVEP. Further comparison shows that the response amplitude of the novel gel electrode at 15 Hz is slightly higher than that of the dry electrode. In the high-frequency range, wet electrodes have the lowest background noise, novel gel electrodes show good stability, while dry electrodes exhibit higher background noise and poorer stability. The above results are highly consistent with the physical characteristics of various electrode materials, fully validating the accuracy and reliability of this system in acquiring and analyzing data in different electrode modes.

## 4. Conclusion

This paper proposes and implements a multi-channel EEG acquisition and analysis system centered on ESP32-S3 and ADS1299, completing full-chain integration from hardware acquisition, link transmission to upper computer real-time visualization and offline archiving. The system demonstrated stable and reliable cognitive-related signal capture capability in both P300 and SSVEP classical paradigms: typical positive components appeared at 300-400 ms for all four electrode types in the P300 experiment; in the SSVEP (15 Hz) experiment, the fundamental frequency and second harmonic were clear, with ICA and spectral results consistently confirming each other. In the electrode material comparison, wet electrodes showed the best overall signal-to-noise ratio; the novel PAM-PAA-PANI gel electrode also demonstrated better performance than dry electrodes, combining convenience and comfort; dry electrodes are convenient to use but are more sensitive to impedance and motion artifacts, with higher background noise. Overall, this system balances low power consumption, high precision, and real-time performance, capable of achieving stable acquisition and effective analysis of EEG signals under various electrode contact conditions, demonstrating application potential in scenarios such as neuroscience research, brain state monitoring, and BCI prototype verification. Future work will focus on adaptive artifact suppression and online feature extraction optimization, channel and peripheral synchronization expansion, and systematic evaluation of novel gel electrodes under long-term wearing and motion conditions to further enhance the system's robustness and universality.
